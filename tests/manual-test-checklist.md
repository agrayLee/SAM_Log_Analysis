# 手动测试清单

## 概述
本文档提供了网络共享日志验证程序的详细手动测试步骤，确保所有功能在实际环境中正常工作。

## 测试环境要求

### 系统要求
- [ ] Windows 10/11 操作系统
- [ ] Node.js 14.0.0 或更高版本
- [ ] PowerShell 或命令提示符
- [ ] 网络连接正常

### 网络环境
- [ ] 可以访问目标服务器 10.21.189.125
- [ ] 具有网络共享访问权限
- [ ] 认证信息：PRC/Administrator / Password2024

## 测试前准备

### 1. 环境检查
- [ ] 运行健康检查工具
  ```bash
  npm run health-check
  ```
- [ ] 确认所有检查项通过
- [ ] 检查日志目录权限

### 2. 依赖验证
- [ ] 确认 package.json 存在
- [ ] 运行 `node --version` 确认版本
- [ ] 检查项目目录结构完整

## 功能测试

### 一、网络连接验证测试

#### 1.1 基本连接测试
- [ ] 运行主程序
  ```bash
  npm start
  ```
- [ ] 观察连接状态输出
- [ ] 确认显示 "✅ 已连接"
- [ ] 检查网络连接日志

**预期结果：**
- 程序能成功连接到 \\10.21.189.125\Logs
- 控制台显示连接成功信息
- 生成网络连接日志

**如果失败：**
- [ ] 检查网络连通性 (ping 10.21.189.125)
- [ ] 验证认证信息是否正确
- [ ] 检查防火墙设置
- [ ] 查看错误日志详情

#### 1.2 连接状态验证
- [ ] 程序运行时断开网络
- [ ] 观察程序响应
- [ ] 重新连接网络
- [ ] 确认程序能检测到连接变化

**预期结果：**
- 网络断开时程序能检测到
- 显示相应的错误信息
- 网络恢复时能重新连接

### 二、文件识别测试

#### 2.1 日期文件夹识别
- [ ] 确认程序能找到今天日期的文件夹
- [ ] 验证文件夹路径格式（YYYYMMDD）
- [ ] 检查文件夹存在性判断

**测试用例：**
- 今天是 2024年8月11日，应该找到文件夹 "20240811"
- 如果文件夹不存在，应该给出相应提示

#### 2.2 日志文件识别
- [ ] 确认能找到当前日志文件
  - 格式：JieLink_Center_Comm_YYYYMMDD.log
- [ ] 确认能找到历史切片文件
  - 格式：JieLink_Center_Comm_YYYYMMDD.log.1, .log.2 等
- [ ] 验证文件按时间顺序排列

**预期结果：**
- 显示找到的文件列表
- 文件大小信息正确
- 大文件有相应警告标记

#### 2.3 文件信息显示
- [ ] 验证文件大小显示正确（MB单位）
- [ ] 确认文件类型标识（当前/历史切片）
- [ ] 检查大文件警告功能

### 三、日志解析测试

#### 3.1 山姆接口记录解析
- [ ] 程序能找到包含 "查询山姆是否会员，请求地址" 的行
- [ ] 能正确提取车牌号信息
- [ ] 能找到对应的 "查询山姆是否会员，返回结果" 行
- [ ] 能提取 freeParking 和 rejectReason 字段

**测试数据验证：**
- [ ] 车牌号格式正确（如：闽A9L69Y）
- [ ] 免费停车状态为布尔值
- [ ] 时间戳格式正确
- [ ] 请求响应能正确匹配

#### 3.2 解析结果验证
- [ ] 确认解析出前10条记录
- [ ] 验证记录格式完整
- [ ] 检查时间戳匹配逻辑
- [ ] 确认统计信息正确

**预期输出格式：**
```
--- 记录 1 ---
车牌号: 闽A9L69Y
查询时间: 2024-08-11 10:30:00
响应时间: 2024-08-11 10:30:01
免费停车: 是
失败原因: 无
请求行号: 1234
响应行号: 1250
```

#### 3.3 边界情况测试
- [ ] 测试空文件处理
- [ ] 测试损坏的日志行
- [ ] 测试超大文件（>60MB）
- [ ] 测试无匹配记录的文件

### 四、性能测试

#### 4.1 文件读取性能
- [ ] 测试读取大文件的时间
- [ ] 监控内存使用情况
- [ ] 验证吞吐量计算

**性能基准：**
- 60MB文件读取时间 < 30秒
- 内存使用增长 < 200MB
- 吞吐量 > 2MB/s

#### 4.2 解析性能
- [ ] 测试解析1000行日志的时间
- [ ] 验证流式处理效果
- [ ] 确认内存不会持续增长

**测试步骤：**
1. 记录程序启动时内存使用
2. 解析大文件
3. 监控内存峰值
4. 确认解析完成后内存释放

### 五、错误处理测试

#### 5.1 网络错误处理
- [ ] 测试网络断开时的处理
- [ ] 测试认证失败的处理
- [ ] 测试超时的处理

**测试方法：**
- 故意输入错误密码
- 测试网络延迟环境
- 断开网络连接

#### 5.2 文件错误处理
- [ ] 测试文件不存在的处理
- [ ] 测试权限不足的处理
- [ ] 测试文件损坏的处理

#### 5.3 数据错误处理
- [ ] 测试格式错误的日志行
- [ ] 测试编码问题
- [ ] 测试特殊字符处理

### 六、日志记录测试

#### 6.1 日志文件生成
- [ ] 确认生成 error.log 文件
- [ ] 确认生成 info.log 文件
- [ ] 确认生成 debug.log 文件
- [ ] 确认生成 warn.log 文件

#### 6.2 日志内容验证
- [ ] 验证日志格式正确
- [ ] 确认时间戳准确
- [ ] 检查日志级别标记
- [ ] 验证错误信息完整

#### 6.3 日志轮转测试
- [ ] 测试日志文件按日期分割
- [ ] 验证大文件自动分割
- [ ] 确认历史日志保留

### 七、工具测试

#### 7.1 健康检查工具
- [ ] 运行 `npm run health-check`
- [ ] 验证所有检查项
- [ ] 确认报告生成

#### 7.2 数据验证工具
- [ ] 准备测试数据文件
- [ ] 运行 `npm run validate-data test-data.json`
- [ ] 验证验证结果

#### 7.3 日志分析工具
- [ ] 运行 `npm run analyze-logs`
- [ ] 查看分析报告
- [ ] 验证统计信息

## 集成测试

### 完整流程测试
- [ ] 从头到尾运行完整程序
- [ ] 验证所有输出信息
- [ ] 检查生成的所有文件
- [ ] 确认程序正常退出

**完整测试步骤：**
1. 运行健康检查
2. 启动主程序
3. 等待所有处理完成
4. 检查输出结果
5. 验证日志文件
6. 运行数据验证
7. 查看分析报告

## 兼容性测试

### 不同环境测试
- [ ] Windows 10 环境
- [ ] Windows 11 环境
- [ ] 不同版本 Node.js
- [ ] PowerShell vs CMD

### 不同数据测试
- [ ] 小文件（<1MB）
- [ ] 中等文件（1-10MB）
- [ ] 大文件（10-100MB）
- [ ] 超大文件（>100MB）

## 压力测试

### 并发测试
- [ ] 同时运行多个程序实例
- [ ] 测试资源竞争情况
- [ ] 验证日志文件冲突处理

### 长时间运行测试
- [ ] 程序连续运行1小时
- [ ] 监控内存泄漏
- [ ] 检查资源释放

## 用户体验测试

### 输出信息测试
- [ ] 验证所有提示信息清晰易懂
- [ ] 确认错误信息有帮助性
- [ ] 检查进度指示明确

### 操作便利性测试
- [ ] 验证命令行参数
- [ ] 测试一键运行功能
- [ ] 确认输出格式友好

## 测试结果记录

### 测试执行记录
- 测试日期：____________
- 测试人员：____________
- 环境信息：____________
- Node.js版本：__________

### 问题记录
| 测试项目 | 状态 | 问题描述 | 解决方案 |
|---------|------|----------|----------|
|         | ✅/❌ |          |          |
|         | ✅/❌ |          |          |
|         | ✅/❌ |          |          |

### 总体评估
- [ ] 所有核心功能正常
- [ ] 性能满足要求
- [ ] 错误处理完善
- [ ] 用户体验良好
- [ ] 可以正式使用

### 建议改进
1. ________________________________
2. ________________________________
3. ________________________________

---

**测试完成签名：**
测试人员：________________  日期：________________
复查人员：________________  日期：________________
